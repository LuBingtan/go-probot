// Code generated by codegen. DO NOT EDIT.

package probot_test

import (
	"fmt"
	"testing"

	"github.com/airconduct/go-probot"
	"github.com/google/go-github/v48/github"
)

{{ range $event := .Events }}
func Test{{ $event.Type }}(t *testing.T) {
	{{if $event.RawType}}checkEvent(t, probot.GitHub.{{ $event.Type }}, "{{ $event.RawType }}", "")
    {{ range $val := .Actions }}checkEvent(t, probot.GitHub.{{ $event.Type }}.{{ toCamel $val }}, "{{ $event.RawType }}", "{{ $val }}")
    {{ end }}{{else}}checkEvent(t, probot.GitHub.{{ $event.Type }}, "{{ toSnake $event.Type }}", "")
    {{ range $val := .Actions }}checkEvent(t, probot.GitHub.{{ $event.Type }}.{{ toCamel $val }}, "{{ toSnake $event.Type }}", "{{ $val }}")
    {{ end }}{{end}}
	h := probot.GitHub.{{ $event.Type }}.Handler(func(ctx probot.GitHub{{ $event.Type }}Context) {
		fmt.Println(ctx)
	})
	h.(probot.EventHandlerFunc[probot.GitHubClient, github.{{ $event.Type }}Event])(nil)
}
{{ end }}

func checkEvent(t *testing.T, e probot.WebhookEvent, tp, action string) {
	if e.Type() != tp {
		t.Fatal("Failed to check event type", "expect", tp, "actual", e.Type())
	}
	if e.Action() != action {
		t.Fatal("Failed to check event action", "expect", action, "actual", e.Action())
	}
}